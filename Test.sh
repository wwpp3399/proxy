#!/bin/bash
arr=('43.248.187.160:5010' '43.248.187.160:5020' '43.248.187.160:5080' '43.248.187.160:5090' '43.248.187.45:5010' '43.248.187.45:5020' '43.248.187.45:5080' '43.248.187.45:5090' '43.248.187.33:5010' '43.248.187.33:5020' '43.248.187.33:5080'
	  '43.248.187.33:5090' '43.248.188.63:5010' '43.248.188.63:5020' '43.248.188.63:5080'
	  '43.248.188.63:5090' '43.248.189.241:5010' '43.248.189.241:5020' '43.248.189.241:5080'
	  '43.248.189.241:5090')
while true
do
for k in ${arr[@]}
#也可以写成for element in ${array[*]}
do
	start=$(gdate +%s%N)            #开始时间  
	curl -s -x $k https://api-a.soulapp.cn 
	end=$(gdate +%s+%s%N)              #结束时间  
  
	time=$(( $end - $start ))    #计算时间差  
	outTime=$(printf "%.0f" `echo "scale=0;${time}/1000000"|bc`)
	# if [$time<$currentTime]; then
	# 	minServer=$k
	# 	currentTime=$time
	# fi
	echo "服务器:${k}	延迟:${outTime}"    
done
echo '---------------------------------------------'
sleep 60
done